<span us-spinner spinner-key="spinner-1"></span>
<div class='container-fluid'>
    <div class='row'>
        <div class='col-lg-2'>
            <div ng-controller="treeCtrl">
                <form>
                    <div ui-tree>
                    <h4>Meters</h4>
                      <ol ui-tree-nodes ng-model="facilities">
                        <li ng-repeat="facility in facilities" ui-tree-node>
                          <div ui-tree-handle>
                            <a class="btn btn-success btn-xs" data-nodrag ng-click="toggle(this)"><span class="glyphicon" ng-class="{'glyphicon-chevron-right': collapsed, 'glyphicon-chevron-down': !collapsed}"></span></a>
                            {{facility.name}} 
                            <input type="checkbox" value="{{facility.id}}" ng-model="facility.selected" ng-click="" ng-change="facilityChange({{$index}})"/>
                          </div>
                    
                          <ol ui-tree-nodes ng-model="facility.meters" ng-class="{hidden: collapsed}">
                            <li ng-repeat="meter in facility.meters" ui-tree-node >
                              <div ui-tree-handle>
                                {{meter.desc}} <input type="checkbox" value="{{meter.id}}" ng-model="meter.selected"  />
                              </div>
                            </li>
                          </ol>
                        </li>
                      </ol>
                      <button type="button" class="btn-sm btn-success" ng-click="refresh()">Refresh Charts</button>
                      
                      <h4>Views</h4>
                      <ol ui-tree-nodes ng-model="views">
                        <li ng-repeat="view in views" ui-tree-node data-nodrag>
                          <div ui-tree-handle>
                            {{view.name}} <input type="checkbox" value="{{row.id}}" ng-model="view.selected" ng-change="viewChange('{{view.name}}')"/>
                          </div>
                        </li>
                      </ol>
                    </div>
                    
                    <br>
                    
                    <button type="button" class="btn-sm btn-success" ng-click="updateView()">Update View</button>
                    <br>
                    <button type="button" class="btn-sm btn-success" ng-click="deleteView()">Delete View</button>
                    <br>
                    <br>
                    <button type="button" class="btn-sm btn-success" ng-click="createView()">Create View</button>
                    <br>
                    
                    <input type="text" class="view-input" >
                    <span class="label label-info">View Name</span><br>
                    <input type="checkbox" value="" ng-model="createDefault"  />
                    <span class="label label-info">Make Default</span>
                    <br>
                    <br>
                    <button type="button" class="btn-sm btn-success">Launch LP</button>
                </form>
            </div>
        </div>
        <div class='col-lg-10'>
            <div class='row'>
                <div class='col-lg-6'>
                    <kwharea kwhdata="kwh"></kwharea>
                </div>
            	<div class='col-lg-6'>
                    <kwhheatmap kwhheatdata="kwhheatdata"></kwhheatmap>
                </div>
            </div>
            <div class='row'>
            	<div class='col-lg-6'> 
                    <dailyprofile linedata="dailyProfileData"></dailyprofile>
                    
                </div>

                <div class='col-lg-6'>
                    <kwbarchart bardata="data2" ></kwbarchart>
                </div>
            </div>
        </div>
    </div>
</div>