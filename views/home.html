<span us-spinner spinner-key="spinner-1"></span>
<div class='container-fluid'>
    <div class='row'>
        <div class='col-lg-2'>
            <div ng-controller="treeCtrl">
                <form>
                    <div ui-tree>
                    <h4>Meters</h4>
                      <div class="meters-scroller">
                        <ol ui-tree-nodes ng-model="facilities">
                          <li ng-repeat="facility in facilities" ui-tree-node data-collapsed="facility.collapsed">
                            <div ui-tree-handle>
                              <a class="btn btn-success btn-xs" data-nodrag ng-click="toggle(this)"><span class="glyphicon" ng-class="{'glyphicon-chevron-right': collapsed, 'glyphicon-chevron-down': !collapsed}"></span></a>
                              {{facility.name}} 
                              <input type="checkbox" value="{{facility.id}}" ng-model="facility.selected" ng-click="" ng-change="facilityChange({{$index}})"/>
                            </div>
                      
                            <ol ui-tree-nodes ng-model="facility.meters" ng-class="{hidden: collapsed}">
                              <li ng-repeat="meter in facility.meters" ui-tree-node >
                                <div ui-tree-handle>
                                  {{meter.desc}} <input type="checkbox" value="{{meter.id}}" ng-model="meter.selected"  />
                                </div>
                              </li>
                            </ol>
                          </li>
                        </ol>
                      </div>
                      <br>
                      <p class="text-center">
                        <button type="button" class="btn-sm btn-success" ng-click="refresh()">Refresh Charts</button>
                      </p>
                      
                      <h4>Views</h4>
                      <div class="views-scroller">
                        <ol ui-tree-nodes ng-model="views">
                          <li ng-repeat="view in views" ui-tree-node data-nodrag>
                            <div ui-tree-handle>
                              {{view.name}} <input type="checkbox" value="{{row.id}}" ng-model="view.selected" ng-change="viewChange('{{view.name}}')"/>
                            </div>
                          </li>
                        </ol>
                      </div>
                    </div>
                    
                    <br>
                    <div class="row">
                      <p class="text-center">
                        <button type="button" class="btn-sm btn-success" ng-click="updateView()">Save</button>
                    
                        <button type="button" class="btn-sm btn-success" ng-click="deleteView()">Delete</button>
                        <button type="button" class="btn-sm btn-success" ng-click="saveAs()">Save As</button>
                      </p>
                    </div>
                    <br>
                    <br>
                    <p class="text-center">
                      <button type="button" class="btn-sm btn-success">Launch LP</button>
                    </p>
                </form>
            </div>
        </div>
        <div class='col-lg-10'>
            <div class='row'>
                <div class='col-lg-6'>
                    <kwharea kwhdata="kwh"></kwharea>
                </div>
            	<div class='col-lg-6'>
                    <kwhheatmap kwhheatdata="kwhheatdata"></kwhheatmap>
                </div>
            </div>
            <div class='row'>
            	<div class='col-lg-6'> 
                    <dailyprofile linedata="dailyProfileData"></dailyprofile>
                    
                </div>

                <div class='col-lg-6'>
                    <kwbarchart bardata="data2" ></kwbarchart>
                </div>
            </div>
        </div>
    </div>
</div>